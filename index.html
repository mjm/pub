<!DOCTYPE html>
<html>
  <head>
    <title>Matt's Blog Client</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss/dist/tailwind.min.css" rel="stylesheet">
<style>
body {
  background-color: #fff5eb;
}
</style>
  </head>
  <body>
    Loading...
    <script src="main.js"></script>
    <script>
      var session = localStorage.getItem('session');
      if (session) {
        session = JSON.parse(session);
      } else {
        session = {};
      }

      var pageData = localStorage.getItem('pageData');
      if (pageData) { session.pageData = JSON.parse(pageData); }

      var app = Elm.Main.init({
        flags: { session: session }
      });

      app.ports.storePageData.subscribe(function(data) {
        localStorage.setItem('pageData', JSON.stringify(data));
      });

      app.ports.storeSession.subscribe(function(data) {
        var pageData = data.pageData;
        delete data.pageData;

        localStorage.setItem('pageData', JSON.stringify(pageData));
        localStorage.setItem('session', JSON.stringify(data));
      });
    </script>
  </body>
</html>
